<div class="auth-container">
  <div class="auth-card">

    <!-- Left Section - Form -->
    <div class="auth-card__form">
      <div class="form-content">

        <!-- Initial Form State -->
        <div *ngIf="!showSuccessMessage" class="form-header">
          <h2 class="form-title brand">TaxPal</h2>
          <h2 class="form-title">Reset Password</h2>
          <p class="form-subtitle">
            Enter your email address and we'll send you<br>
            a link to reset your password
          </p>
        </div>

        <!-- Success Header -->
        <div *ngIf="showSuccessMessage" class="form-header">
          <div class="success-icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="m9 12 2 2 4-4"></path>
              <circle cx="12" cy="12" r="10"></circle>
            </svg>
          </div>
          <h2 class="form-title brand">TaxPal</h2>
          <h2 class="form-title">Check Your Email</h2>
          <p class="form-subtitle">
            We've sent password reset instructions<br>
            to your email address
          </p>
        </div>

        <!-- Form -->
        <form *ngIf="!showSuccessMessage" class="auth-form" [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">

          <!-- Email Field -->
          <div class="form-field">
            <label class="form-field__label" for="email">Email</label>
            <input
              id="email"
              type="email"
              formControlName="email"
              class="form-field__input"
              [class.form-field__input--error]="isEmailInvalid() || errorMessage"
              placeholder="your@gmail.com"
            />
            <div class="form-field__error" *ngIf="isEmailInvalid()">
              {{ getFieldError('email') }}
            </div>
          </div>

          <!-- Error Message -->
          <div class="error-message" *ngIf="errorMessage">
            {{ errorMessage }}
          </div>

          <!-- Submit Button -->
          <button type="submit" class="submit-button" [disabled]="isLoading">
            <span *ngIf="isLoading" class="loading-spinner"></span>
            {{ isLoading ? 'Sending...' : 'Send Reset Link' }}
          </button>
        </form>

        <!-- Success Actions -->
        <div *ngIf="showSuccessMessage" class="success-actions">
          <div class="success-message">
            Reset instructions have been sent to {{ email?.value }}. Please check your inbox and spam folder.
          </div>

          <button type="button" class="secondary-button" (click)="resendEmail()">
            Resend Email
          </button>

          <button type="button" class="submit-button" (click)="navigateToLogin()">
            Back to Login
          </button>

          <p class="redirect-message">
            Redirecting to login in {{ countdown }} seconds...
          </p>
        </div>

      </div>
    </div>

    <!-- Right Section - Welcome -->
    <div class="auth-card__welcome">
      <div class="welcome-content">
        <h1 class="welcome-title">{{ showSuccessMessage ? 'Check Your Email' : 'Forgot Password?' }}</h1>
        <p class="welcome-subtitle">{{ showSuccessMessage ? 'Reset link sent successfully' : 'Remember your password?' }}</p>
        <button type="button" class="welcome-button" (click)="navigateToLogin()">
          Sign In
        </button>
      </div>
    </div>

  </div>
</div>
