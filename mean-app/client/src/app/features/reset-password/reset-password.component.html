<div class="reset-password-container">
  <div class="reset-password-card">
    <div class="logo-section">
      <h1 class="logo">TaxPal</h1>
    </div>
    
    <div class="form-section">
      <h2 class="title">Reset Password</h2>
      <p class="subtitle">
        Enter your new password below to complete<br>
        the password reset process
      </p>
      
      <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
        <!-- New Password Field -->
        <div class="form-group">
          <label for="newPassword">New Password</label>
          <div class="password-input-wrapper">
            <input 
              [type]="showPassword ? 'text' : 'password'"
              id="newPassword" 
              formControlName="newPassword"
              [class.error]="getFieldError('newPassword')"
              placeholder="••••••••••••">
            
            <button 
              type="button" 
              class="password-toggle"
              (click)="togglePasswordVisibility('newPassword')">
              {{ showPassword ? '👁️' : '👁️‍🗨️' }}
            </button>
          </div>
          
          <div class="error-message" *ngIf="getFieldError('newPassword')">
            {{ getFieldError('newPassword') }}
          </div>
        </div>

        <!-- Confirm Password Field -->
        <div class="form-group">
          <label for="confirmPassword">Confirm New Password</label>
          <div class="password-input-wrapper">
            <input 
              [type]="showConfirmPassword ? 'text' : 'password'"
              id="confirmPassword" 
              formControlName="confirmPassword"
              [class.error]="getFieldError('confirmPassword')"
              placeholder="••••••••••••">
            
            <button 
              type="button" 
              class="password-toggle"
              (click)="togglePasswordVisibility('confirmPassword')">
              {{ showConfirmPassword ? '👁️' : '👁️‍🗨️' }}
            </button>
          </div>
          
          <div class="error-message" *ngIf="getFieldError('confirmPassword')">
            {{ getFieldError('confirmPassword') }}
          </div>
        </div>
        
        <!-- General Error Message -->
        <div class="error-message general-error" *ngIf="errorMessage">
          {{ errorMessage }}
        </div>
        
        <button 
          type="submit" 
          class="reset-btn"
          [disabled]="resetPasswordForm.invalid || isLoading">
          <span *ngIf="!isLoading">Reset Password</span>
          <span *ngIf="isLoading" class="loading-text">Resetting...</span>
        </button>
      </form>
      
      <div class="success-message" *ngIf="showSuccessMessage">
        <h3>Password Reset Successfully!</h3>
        <p>Your password has been updated. You will be redirected to login...</p>
      </div>
      
      <div class="links-section">
        <a (click)="goBackToLogin()" class="back-link">
          ← Back to Login
        </a>
        <a (click)="requestNewResetLink()" class="reset-link" *ngIf="errorMessage.includes('Invalid or expired')">
          Request New Reset Link
        </a>
      </div>
    </div>
    
    <div class="side-section">
      <div class="side-content">
        <h2 class="side-title">Create New<br>Password</h2>
        <p class="side-subtitle">Your new password must be different from previously used passwords</p>
        <button class="sign-in-btn" (click)="goBackToLogin()">
          Back to Login
        </button>
      </div>
    </div>
  </div>
</div>
