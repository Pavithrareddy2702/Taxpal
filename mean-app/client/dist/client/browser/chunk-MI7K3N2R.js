import{a as j}from"./chunk-QUZCL42G.js";import{g as F}from"./chunk-OCZNNLXB.js";import{a as T,b as v,c as R,d as z,g as L,i as V,l as D,q as B,s as Y}from"./chunk-SWTIH3DO.js";import"./chunk-L6XRWYET.js";import"./chunk-Q5QP427L.js";import{Ab as o,Bb as m,Fb as b,Hb as p,Ib as l,Lc as E,S as P,Sa as a,Sc as I,Ub as k,Wb as i,Xb as w,Yb as f,ab as O,bb as g,c as x,ga as _,ha as h,hb as S,i as C,ia as y,ja as M,lb as u,yb as c,zb as n}from"./chunk-24VTUSTZ.js";function N(r,t){r&1&&(n(0,"div",12)(1,"h2",13),i(2,"TaxPal"),o(),n(3,"h2",14),i(4,"Reset Password"),o(),n(5,"p",15),i(6," Enter your email address and we'll send you"),m(7,"br"),i(8," a link to reset your password "),o()())}function G(r,t){r&1&&(n(0,"div",12)(1,"div",16),y(),n(2,"svg",17),m(3,"path",18)(4,"circle",19),o()(),M(),n(5,"h2",13),i(6,"TaxPal"),o(),n(7,"h2",14),i(8,"Check Your Email"),o(),n(9,"p",15),i(10," We've sent password reset instructions"),m(11,"br"),i(12," to your email address "),o()())}function q(r,t){if(r&1&&(n(0,"div",28),i(1),o()),r&2){let e=l(2);a(),f(" ",e.getFieldError("email")," ")}}function $(r,t){if(r&1&&(n(0,"div",29),i(1),o()),r&2){let e=l(2);a(),f(" ",e.errorMessage," ")}}function U(r,t){r&1&&m(0,"span",30)}function H(r,t){if(r&1){let e=b();n(0,"form",20),p("ngSubmit",function(){_(e);let d=l();return h(d.onSubmit())}),n(1,"div",21)(2,"label",22),i(3,"Email"),o(),m(4,"input",23),u(5,q,2,1,"div",24),o(),u(6,$,2,1,"div",25),n(7,"button",26),u(8,U,1,0,"span",27),i(9),o()()}if(r&2){let e=l();c("formGroup",e.forgotPasswordForm),a(4),k("form-field__input--error",e.isEmailInvalid()||e.errorMessage),a(),c("ngIf",e.isEmailInvalid()),a(),c("ngIf",e.errorMessage),a(),c("disabled",e.isLoading),a(),c("ngIf",e.isLoading),a(),f(" ",e.isLoading?"Sending...":"Send Reset Link"," ")}}function W(r,t){if(r&1){let e=b();n(0,"div",31)(1,"div",32),i(2),o(),n(3,"button",33),p("click",function(){_(e);let d=l();return h(d.resendEmail())}),i(4," Resend Email "),o(),n(5,"button",34),p("click",function(){_(e);let d=l();return h(d.navigateToLogin())}),i(6," Back to Login "),o(),n(7,"p",35),i(8),o()()}if(r&2){let e=l();a(2),f(" Reset instructions have been sent to ",e.email==null?null:e.email.value,". Please check your inbox and spam folder. "),a(6),f(" Redirecting to login in ",e.countdown," seconds... ")}}var A=class r{constructor(t,e,s,d){this.formBuilder=t;this.router=e;this.authService=s;this.renderer=d;this.forgotPasswordForm=this.formBuilder.group({email:["",[v.required,v.email]]})}forgotPasswordForm;isLoading=!1;showSuccessMessage=!1;errorMessage="";countdown=5;destroy$=new C;countdownTimer;ngOnInit(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.countdownTimer&&clearInterval(this.countdownTimer)}get email(){return this.forgotPasswordForm.get("email")}isEmailInvalid(){let t=this.email;return!!(t&&t.invalid&&(t.dirty||t.touched))}onSubmit(){return x(this,null,function*(){if(!this.forgotPasswordForm.valid){this.forgotPasswordForm.markAllAsTouched(),this.errorMessage="Please enter a valid email address.";return}let t=this.email?.value.trim();this.isLoading=!0,this.errorMessage="";try{yield this.sendResetPasswordEmail(t),this.showSuccessMessage=!0,this.startCountdown()}catch(e){this.handleResetError(e)}finally{this.isLoading=!1}})}sendResetPasswordEmail(t){return x(this,null,function*(){return new Promise((e,s)=>{this.authService.forgotPassword(t).pipe(P(this.destroy$)).subscribe({next:()=>e(),error:d=>s(d)})})})}resendEmail(){this.showSuccessMessage=!1,this.countdown=5,this.forgotPasswordForm.reset(),this.countdownTimer&&clearInterval(this.countdownTimer)}startCountdown(){this.countdown=5,this.countdownTimer=setInterval(()=>{this.countdown--,this.countdown<=0&&(clearInterval(this.countdownTimer),this.navigateToLogin())},1e3)}navigateToLogin(){this.router.navigate(["/login"])}handleResetError(t){t.status===404?this.errorMessage="Email address not found. Please check and try again.":t.status===429?this.errorMessage="Too many reset requests. Please try again in a few minutes.":t.status===0?this.errorMessage="Unable to connect to server. Please check your internet connection.":this.errorMessage=t.message||"Failed to send reset email. Please try again."}getFieldError(t){let e=this.forgotPasswordForm.get(t);if(e&&e.invalid&&(e.dirty||e.touched)){if(e.errors?.required)return"Email is required";if(e.errors?.email)return"Please enter a valid email address"}return""}static \u0275fac=function(e){return new(e||r)(g(B),g(F),g(j),g(O))};static \u0275cmp=S({type:r,selectors:[["app-forgot-password"]],decls:16,vars:6,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-card__form"],[1,"form-content"],["class","form-header",4,"ngIf"],["class","auth-form",3,"formGroup","ngSubmit",4,"ngIf"],["class","success-actions",4,"ngIf"],[1,"auth-card__welcome"],[1,"welcome-content"],[1,"welcome-title"],[1,"welcome-subtitle"],["type","button",1,"welcome-button",3,"click"],[1,"form-header"],[1,"form-title","brand"],[1,"form-title"],[1,"form-subtitle"],[1,"success-icon"],["width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","m9 12 2 2 4-4"],["cx","12","cy","12","r","10"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"form-field"],["for","email",1,"form-field__label"],["id","email","type","email","formControlName","email","placeholder","your@gmail.com",1,"form-field__input"],["class","form-field__error",4,"ngIf"],["class","error-message",4,"ngIf"],["type","submit",1,"submit-button",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"form-field__error"],[1,"error-message"],[1,"loading-spinner"],[1,"success-actions"],[1,"success-message"],["type","button",1,"secondary-button",3,"click"],["type","button",1,"submit-button",3,"click"],[1,"redirect-message"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u(4,N,9,0,"div",4)(5,G,13,0,"div",4)(6,H,10,8,"form",5)(7,W,9,2,"div",6),o()(),n(8,"div",7)(9,"div",8)(10,"h1",9),i(11),o(),n(12,"p",10),i(13),o(),n(14,"button",11),p("click",function(){return s.navigateToLogin()}),i(15," Sign In "),o()()()()()),e&2&&(a(4),c("ngIf",!s.showSuccessMessage),a(),c("ngIf",s.showSuccessMessage),a(),c("ngIf",!s.showSuccessMessage),a(),c("ngIf",s.showSuccessMessage),a(4),w(s.showSuccessMessage?"Check Your Email":"Forgot Password?"),a(2),w(s.showSuccessMessage?"Reset link sent successfully":"Remember your password?"))},dependencies:[I,E,Y,L,T,R,z,V,D],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Inter,Roboto,sans-serif;background:#000;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}.auth-container[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:0 auto}.auth-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 12px #0000001a;overflow:hidden;display:flex;min-height:600px}.auth-card__form[_ngcontent-%COMP%]{flex:1;padding:3rem 2.5rem;display:flex;align-items:center;background:#fff}.form-content[_ngcontent-%COMP%]{width:100%}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem}.form-title[_ngcontent-%COMP%]{font-size:1.8rem;color:#000;margin-bottom:.5rem;font-weight:700}.form-title.brand[_ngcontent-%COMP%]{color:#2ca49d;font-weight:700;margin-bottom:1rem}.form-subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:1rem;line-height:1.5}.success-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1.5rem}.success-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#2ca49d;width:64px;height:64px;animation:_ngcontent-%COMP%_scaleIn .5s ease-out}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0)}50%{transform:scale(1.1)}to{transform:scale(1)}}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-field__label[_ngcontent-%COMP%]{display:block;color:#000;font-weight:500;margin-bottom:.5rem;font-size:.9rem}.form-field__input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:2px solid #E5E7EB;border-radius:12px;font-size:1rem;transition:all .3s ease;background:#f3f4f6;color:#000}.form-field__input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2ca49d;background:#fff;box-shadow:0 2px 6px #2ca49d26}.form-field__input--error[_ngcontent-%COMP%]{border-color:#ef4444;background:#fef2f2}.form-field__error[_ngcontent-%COMP%]{color:#ef4444;font-size:.85rem;margin-top:.5rem}.error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #FECACA;color:#dc2626;padding:12px 16px;border-radius:12px;margin-bottom:1rem;font-size:.9rem;display:flex;align-items:center;gap:8px}.error-message[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";font-size:16px}.success-message[_ngcontent-%COMP%]{background:#f0fdf4;border:1px solid #BBF7D0;color:#166534;padding:12px 16px;border-radius:12px;margin-bottom:1.5rem;font-size:.9rem;text-align:center;animation:_ngcontent-%COMP%_slideDown .5s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.submit-button[_ngcontent-%COMP%]{width:100%;background:#2ca49d;color:#fff;border:none;padding:14px 24px;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px}.submit-button[_ngcontent-%COMP%]:hover{background:#239088;transform:translateY(-1px);box-shadow:0 4px 12px #2ca49d4d}.submit-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none}.secondary-button[_ngcontent-%COMP%]{width:100%;border:2px solid #2CA49D;background:transparent;color:#2ca49d;padding:12px 24px;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-bottom:1rem}.secondary-button[_ngcontent-%COMP%]:hover{background:#2ca49d;color:#fff;transform:translateY(-1px)}.auth-card__welcome[_ngcontent-%COMP%]{background:#2ca49d;padding:3rem 2.5rem;display:flex;align-items:center;justify-content:center;flex:1;color:#fff;position:relative;overflow:hidden}.auth-card__welcome[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}.welcome-content[_ngcontent-%COMP%]{text-align:center;z-index:1}.welcome-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:1rem;line-height:1.2}.welcome-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.9;margin-bottom:2rem;line-height:1.4}.welcome-button[_ngcontent-%COMP%]{background:transparent;border:2px solid white;color:#fff;padding:12px 30px;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.welcome-button[_ngcontent-%COMP%]:hover{background:#fff;color:#2ca49d;transform:translateY(-2px);box-shadow:0 2px 6px #ffffff4d}.loading-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(180deg)}}.success-actions[_ngcontent-%COMP%]{text-align:center}.redirect-message[_ngcontent-%COMP%]{color:#6b7280;font-size:.85rem;font-style:italic;margin-top:1rem;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}@media (max-width: 768px){.auth-card[_ngcontent-%COMP%]{flex-direction:column;max-width:100%;margin:1rem}.auth-card__welcome[_ngcontent-%COMP%], .auth-card__form[_ngcontent-%COMP%]{padding:2rem 1.5rem}.welcome-title[_ngcontent-%COMP%]{font-size:2rem}.form-title[_ngcontent-%COMP%]{font-size:1.5rem}}']})};export{A as ForgotPasswordComponent};
