import{a as S}from"./chunk-WAGXJ3BI.js";import"./chunk-L6XRWYET.js";import"./chunk-Q5QP427L.js";import{Ab as e,Fb as u,Hb as h,Ib as p,Jc as P,Kc as M,Lc as v,Pc as w,Qc as y,Sa as r,Sc as I,Wb as a,Xb as l,Yb as C,bb as b,ec as O,ga as x,gc as g,ha as f,hb as _,ic as m,lb as d,yb as c,zb as o}from"./chunk-24VTUSTZ.js";var z=(i,t)=>({"text-red-500":i,"text-green-500":t});function D(i,t){i&1&&(o(0,"div"),a(1,"Loading transactions..."),e())}function N(i,t){if(i&1){let n=u();o(0,"button",9),h("click",function(){x(n);let T=p().$implicit,E=p(2);return f(E.removeTransaction(T._id))}),a(1,"Remove"),e()}}function F(i,t){if(i&1&&(o(0,"tr")(1,"td"),a(2),g(3,"date"),e(),o(4,"td"),a(5),e(),o(6,"td"),a(7),e(),o(8,"td",7),a(9),g(10,"number"),e(),o(11,"td"),d(12,N,2,0,"button",8),e()()),i&2){let n=t.$implicit;r(2),l(m(3,6,n.date,"mediumDate")),r(3),l(n.description),r(2),l(n.category),r(),c("ngClass",O(12,z,n.type==="Expense",n.type==="Income")),r(),C(" $",m(10,9,n.amount,"1.2-2")," "),r(3),c("ngIf",n._id)}}function Y(i,t){if(i&1&&(o(0,"table")(1,"thead")(2,"tr")(3,"th"),a(4,"Date"),e(),o(5,"th"),a(6,"Description"),e(),o(7,"th"),a(8,"Category"),e(),o(9,"th"),a(10,"Amount"),e(),o(11,"th"),a(12,"Actions"),e()()(),o(13,"tbody"),d(14,F,13,15,"tr",6),e()()),i&2){let n=p();r(14),c("ngForOf",n.transactions)}}function A(i,t){i&1&&(o(0,"div",10),a(1,` No transactions found.
`),e())}var k=class i{constructor(t){this.dashboardService=t}transactions=[];userId="";dashboardId="";loading=!0;ngOnInit(){let t=sessionStorage.getItem("current_user")||localStorage.getItem("current_user");if(!t)return console.error("No user logged in.");this.userId=JSON.parse(t).id,this.ensureDashboardAndLoad()}ensureDashboardAndLoad(){this.dashboardService.updateDashboard(this.userId,{}).subscribe({next:t=>{this.dashboardId=t._id,this.transactions=t.transactions||[],this.loading=!1},error:t=>{console.error("Error fetching dashboard",t),this.loading=!1}})}removeTransaction(t){this.dashboardId&&confirm("Are you sure you want to remove this transaction?")&&this.dashboardService.deleteTransaction(this.dashboardId,t).subscribe({next:()=>{this.transactions=this.transactions.filter(n=>n._id!==t),console.log("Transaction removed successfully.")},error:n=>console.error("Error removing transaction",n)})}static \u0275fac=function(n){return new(n||i)(b(S))};static \u0275cmp=_({type:i,selectors:[["app-transactions"]],decls:9,vars:3,consts:[[4,"ngIf"],[1,"transactions-container"],[1,"transactions-header"],[1,"transactions-heading"],[1,"transactions-subheading"],["class","no-results",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],["class","remove-button",3,"click",4,"ngIf"],[1,"remove-button",3,"click"],[1,"no-results"]],template:function(n,s){n&1&&(d(0,D,2,0,"div",0),o(1,"div",1)(2,"div",2)(3,"h2",3),a(4,"Your Transactions"),e(),o(5,"p",4),a(6," Keep track of all your income and expenses here. You can remove any transaction if needed. "),e()(),d(7,Y,15,1,"table",0)(8,A,2,0,"div",5),e()),n&2&&(c("ngIf",s.loading),r(7),c("ngIf",!s.loading&&s.transactions.length>0),r(),c("ngIf",!s.loading&&s.transactions.length===0))},dependencies:[I,P,M,v,y,w],styles:[".layout[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:#0f172a;overflow-x:hidden;font-family:Inter,sans-serif;color:#fff}.transactions-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.transactions-heading[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2c3e50;margin:0}.transactions-subheading[_ngcontent-%COMP%]{font-size:1rem;color:#7f8c8d;margin-top:.5rem;line-height:1.5}.main-content[_ngcontent-%COMP%]{position:relative;padding:0;min-height:100vh;overflow-y:auto;background:#0f172a;transition:margin-left .3s ease}.content-wrapper[_ngcontent-%COMP%]{padding:16px;max-width:1400px;margin:0 auto;width:100%;box-sizing:border-box}.main-header[_ngcontent-%COMP%]{background:#1e293b;padding:20px 16px;border-bottom:1px solid #334155;width:100%;box-sizing:border-box;border-radius:8px}.main-title[_ngcontent-%COMP%]{font-size:clamp(20px,5vw,24px);font-weight:700;color:#5bcf85;line-height:1.2}.main-subtitle[_ngcontent-%COMP%]{font-size:clamp(12px,3vw,14px);color:#94a3b8;margin-top:4px;line-height:1.4}.stats-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:20px}.stat-card[_ngcontent-%COMP%]{background:#1e293b;border-radius:12px;padding:16px;text-align:center;box-shadow:0 1px 4px #0003;transition:transform .2s,box-shadow .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000004d}.stat-value[_ngcontent-%COMP%]{font-size:clamp(20px,5vw,24px);font-weight:700;color:#5bcf85}.stat-label[_ngcontent-%COMP%]{font-size:clamp(12px,3vw,14px);color:#94a3b8}.card[_ngcontent-%COMP%]{background:#1e293b;padding:20px;border-radius:12px;margin-bottom:20px;box-shadow:0 1px 6px #0003;transition:transform .2s,box-shadow .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000004d}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px;border-radius:8px;overflow:hidden}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;font-size:clamp(13px,3vw,14px)}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#15d8c8;color:#fff;font-weight:600}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#fbfcfd;color:#050505;border-top:1px solid #334155;transition:background .3s}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#e3e6ea}.action-cell[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{padding:10px 16px;border-radius:6px;font-weight:600;font-size:clamp(12px,3vw,14px);cursor:pointer;border:none;transition:all .2s;display:inline-flex;align-items:center;justify-content:center;color:#fff}.edit-btn[_ngcontent-%COMP%], .view-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background:#2563eb}.edit-btn[_ngcontent-%COMP%]:hover, .view-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background:#1e40af;transform:translateY(-1px);box-shadow:0 4px 10px #2563eb4d}.remove-button[_ngcontent-%COMP%]{padding:10px!important;border-radius:6px;background-color:red!important;color:#fff;border:none;cursor:pointer;font-size:1rem;font-weight:500;transition:transform .2s,box-shadow .2s}.remove-button[_ngcontent-%COMP%]:hover{background:#dc2626;transform:translateY(-1px);box-shadow:0 4px 8px #ef44444d}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:150px;flex:1}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#94a3b8;font-size:clamp(12px,3vw,14px);font-weight:500}.filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border-radius:6px;border:1px solid #334155;background:#1e293b;color:#fff;font-size:clamp(12px,3vw,14px)}.loading[_ngcontent-%COMP%], .no-results[_ngcontent-%COMP%]{text-align:center;padding:40px;font-size:clamp(14px,3vw,16px);color:#94a3b8;font-style:italic}@media (max-width: 1024px){.filters[_ngcontent-%COMP%]{flex-direction:column}.filter-group[_ngcontent-%COMP%]{min-width:100%}.action-cell[_ngcontent-%COMP%]{flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}}@media (max-width: 768px){.stats-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.card[_ngcontent-%COMP%]{padding:16px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px}.main-title[_ngcontent-%COMP%]{font-size:clamp(18px,6vw,22px)}}@media (max-width: 480px){.main-content[_ngcontent-%COMP%]{padding:8px}.action-btn[_ngcontent-%COMP%]{font-size:12px;padding:8px 12px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;padding:8px}}@media (prefers-color-scheme: dark){[_ngcontent-%COMP%]:root{--bg-color: #0f172a;--card-bg: #1e293b;--text-color: #ffffff;--border-color: #334155;--header-bg: #5bcf85;--button-color: #2563eb}}"]})};export{k as TransactionsComponent};
