import{a as H,b as L,c as W,d as J,e as K,f as Q}from"./chunk-WLB24IX7.js";import{E as U,G as $}from"./chunk-JFETNEWJ.js";import{a as k,b as s,c as w,d as N,g as z,h as D,i as B,l as T,m as j,n as q,o as R,q as A,s as V}from"./chunk-SWTIH3DO.js";import{a as G}from"./chunk-L6XRWYET.js";import{b as E}from"./chunk-Q5QP427L.js";import{$ as h,Ab as e,Bb as u,Hb as x,Ib as y,Kc as P,Lc as I,Sa as l,Sc as S,Wb as r,X as M,Xb as F,Yb as O,bb as d,hb as C,lb as p,yb as m,zb as o}from"./chunk-24VTUSTZ.js";var b=class t{constructor(n){this.http=n}baseUrl=G.apiUrl;addIncome(n){return this.http.post(`${this.baseUrl}/income`,n)}getIncomes(){return this.http.get(`${this.baseUrl}/income`)}static \u0275fac=function(a){return new(a||t)(h(E))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})};function ee(t,n){t&1&&(o(0,"div",21),r(1," Description must be at least 3 characters. "),e())}function te(t,n){t&1&&(o(0,"div",21),r(1," Amount is required. "),e())}function oe(t,n){t&1&&(o(0,"div",21),r(1," Enter a valid amount. "),e())}function ne(t,n){if(t&1&&(o(0,"option",22),r(1),e()),t&2){let a=n.$implicit;m("value",a),l(),F(a)}}function re(t,n){t&1&&(o(0,"div",21),r(1," Category is required. "),e())}function ie(t,n){t&1&&(o(0,"div",21),r(1," Date is required. "),e())}function ae(t,n){if(t&1&&(o(0,"div",23),r(1),e()),t&2){let a=y();l(),O(" ",a.errorMessage," ")}}var X=class t{constructor(n,a,i,c){this.fb=n;this.dialogRef=a;this.incomeService=i;this.snackBar=c;this.incomeForm=this.fb.group({description:["",[s.required,s.minLength(3)]],amount:[null,[s.required,s.min(1)]],category:["",s.required],date:["",s.required],notes:[""]})}incomeForm;categories=["Salary","Freelance","Business","Investments","Other"];errorMessage="";closeForm(){this.dialogRef.close()}cancelForm(){this.incomeForm.reset(),this.closeForm()}submitForm(){if(this.errorMessage="",this.incomeForm.invalid){this.incomeForm.get("amount")?.value===0?this.errorMessage="Enter a valid amount":this.errorMessage="Please fill in all required fields correctly";return}this.incomeService.addIncome(this.incomeForm.value).subscribe({next:n=>{this.snackBar.open("\u2714 Income saved successfully!","Close",{duration:3e3,horizontalPosition:"right",verticalPosition:"top",panelClass:["success-snackbar"]}),this.dialogRef.close(n.income)},error:n=>{console.error("\u274C Error saving income:",n),this.snackBar.open("\u2716 Failed to save income!","Close",{duration:3e3,horizontalPosition:"right",verticalPosition:"top",panelClass:["error-snackbar"]})}})}static \u0275fac=function(a){return new(a||t)(d(A),d(U),d(b),d(K))};static \u0275cmp=C({type:t,selectors:[["app-income-form"]],decls:45,vars:8,consts:[[1,"overlay"],[1,"income-card"],["aria-label","Close",1,"close-btn",3,"click"],[1,"form-heading"],[1,"form-subtitle"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["type","text","formControlName","description","placeholder","eg. Web Design Project"],["class","field-error",4,"ngIf"],["type","number","formControlName","amount","placeholder","$0.00"],["formControlName","category"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","date","formControlName","date"],[1,"form-group","full-width"],["formControlName","notes","rows","3","placeholder","Any additional details..."],["class","form-error-message",4,"ngIf"],[1,"action-buttons"],["type","button",1,"btn-cancel",3,"click"],["type","submit",1,"btn-save"],[1,"field-error"],[3,"value"],[1,"form-error-message"]],template:function(a,i){if(a&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),x("click",function(){return i.closeForm()}),r(3,"\u2715"),e(),o(4,"h2",3),r(5,"Record New Income"),e(),o(6,"p",4),r(7,"Add details about your income to track your finances better."),e(),o(8,"form",5),x("ngSubmit",function(){return i.submitForm()}),o(9,"div",6)(10,"div",7)(11,"label"),r(12,"Description"),e(),u(13,"input",8),p(14,ee,2,0,"div",9),e(),o(15,"div",7)(16,"label"),r(17,"Amount"),e(),u(18,"input",10),p(19,te,2,0,"div",9)(20,oe,2,0,"div",9),e()(),o(21,"div",6)(22,"div",7)(23,"label"),r(24,"Category"),e(),o(25,"select",11)(26,"option",12),r(27,"Select a category"),e(),p(28,ne,2,2,"option",13),e(),p(29,re,2,0,"div",9),e(),o(30,"div",7)(31,"label"),r(32,"Date"),e(),u(33,"input",14),p(34,ie,2,0,"div",9),e()(),o(35,"div",15)(36,"label"),r(37,"Notes (Optional)"),e(),u(38,"textarea",16),e(),p(39,ae,2,1,"div",17),o(40,"div",18)(41,"button",19),x("click",function(){return i.cancelForm()}),r(42,"Cancel"),e(),o(43,"button",20),r(44,"Save"),e()()()()()),a&2){let c,f,_,g,v;l(8),m("formGroup",i.incomeForm),l(6),m("ngIf",((c=i.incomeForm.get("description"))==null?null:c.invalid)&&((c=i.incomeForm.get("description"))==null?null:c.touched)),l(5),m("ngIf",((f=i.incomeForm.get("amount"))==null?null:f.hasError("required"))&&((f=i.incomeForm.get("amount"))==null?null:f.touched)),l(),m("ngIf",((_=i.incomeForm.get("amount"))==null?null:_.value)===0),l(8),m("ngForOf",i.categories),l(),m("ngIf",((g=i.incomeForm.get("category"))==null?null:g.hasError("required"))&&((g=i.incomeForm.get("category"))==null?null:g.touched)),l(5),m("ngIf",((v=i.incomeForm.get("date"))==null?null:v.hasError("required"))&&((v=i.incomeForm.get("date"))==null?null:v.touched)),l(5),m("ngIf",i.errorMessage)}},dependencies:[S,P,I,V,z,q,R,k,D,j,w,N,B,T,$,H,W,L,J,Q],styles:['@charset "UTF-8";.overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0006;display:flex;align-items:center;justify-content:center;z-index:999;padding:16px}.income-card[_ngcontent-%COMP%]{position:relative;background:var(--color-background-paper);padding:24px;border-radius:12px;max-width:640px;width:100%;box-shadow:var(--shadow-2);border:1px solid var(--color-gray-300, #E0E0E0);font-family:var(--font-family);font-size:var(--font-size);color:var(--color-text-primary);transition:all .3s ease}.close-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;border:none;background:none;font-size:18px;cursor:pointer;color:var(--color-text-secondary)}.form-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--color-primary-500);margin-bottom:4px}.form-subtitle[_ngcontent-%COMP%]{font-size:13px;color:var(--color-text-secondary);margin-bottom:20px}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:16px;flex-wrap:wrap}.form-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;min-width:200px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:6px;color:var(--color-text-primary)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px;border:1px solid var(--color-gray-300, #E0E0E0);border-radius:8px;font-size:14px;width:100%;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:var(--color-primary-500);outline:none}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;flex-wrap:wrap}.btn-cancel[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;font-size:14px;cursor:pointer;border:none;flex:1;min-width:100px}.btn-cancel[_ngcontent-%COMP%]{background:var(--color-gray-100, #F5F5F5);color:var(--color-text-primary)}.btn-cancel[_ngcontent-%COMP%]:hover{background:var(--color-gray-300, #E0E0E0)}.btn-save[_ngcontent-%COMP%]{background:var(--color-primary-500);color:#fff}.btn-save[_ngcontent-%COMP%]:hover{background:var(--color-primary-600)}@media (max-width: 768px){.income-card[_ngcontent-%COMP%]{padding:16px;max-width:95%}.form-heading[_ngcontent-%COMP%]{font-size:18px}.form-subtitle[_ngcontent-%COMP%]{font-size:12px}}.success-snackbar[_ngcontent-%COMP%]{background-color:#43a047!important;color:#fff!important;font-weight:600;border-radius:8px!important;padding:8px 16px!important}.error-snackbar[_ngcontent-%COMP%]{background-color:#e53935!important;color:#fff!important;font-weight:600;border-radius:8px!important;padding:8px 16px!important}.mat-snack-bar-container[_ngcontent-%COMP%]{font-size:14px!important;border-radius:8px!important}@media (max-width: 480px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:8px}.btn-cancel[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{width:100%}}.field-error[_ngcontent-%COMP%]{color:#d32f2f;font-size:13px;margin-top:4px}.form-error-message[_ngcontent-%COMP%]{margin-top:10px;padding:8px 12px;background-color:#fdecea;color:#d32f2f;border-radius:6px;text-align:center;font-weight:500}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:15px}']})};export{X as a};
